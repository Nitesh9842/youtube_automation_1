<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#FF0000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='icons/icon-192.png') }}">
    <title>YouTube Uploader - YouTube Automation</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="background-animation">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
    </div>

    <!-- Navigation -->
    <nav class="navbar glass-card">
        <div class="nav-container">
            <a href="/" class="nav-brand">
                <i class="fab fa-youtube"></i>
                <span>YouTube Automation</span>
            </a>
            <div class="nav-menu">
                <a href="/" class="nav-link"><i class="fas fa-home"></i> Home</a>
                <a href="/downloader" class="nav-link"><i class="fas fa-download"></i> Downloader</a>
                <a href="/metadata-generator" class="nav-link"><i class="fas fa-brain"></i> Metadata</a>
                <a href="/uploader" class="nav-link active"><i class="fas fa-upload"></i> Uploader</a>
            </div>
            
            <!-- Auth Buttons (shown when not authenticated) -->
            <div id="navAuthButtons" class="nav-auth-buttons">
                <button id="navSignInBtn" class="btn btn-nav-signin">
                    <i class="fab fa-youtube"></i> Sign in
                </button>
            </div>
            
            <!-- User Menu (shown when authenticated) -->
            <div id="navUserMenu" class="nav-user-menu" style="display: none;">
                <div class="user-avatar" id="navUserAvatar">
                    <img id="navUserAvatarImg" src="" alt="User Avatar">
                </div>
                <div class="user-dropdown">
                    <div class="user-info">
                        <div class="user-name" id="navUserName">Channel Name</div>
                        <div class="user-email" id="navUserStats">Stats</div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <!-- ‚úÖ FIXED: Ensure dropdown logout button is visible -->
                    <button class="dropdown-item dropdown-logout" id="navLogoutBtn" style="display: flex !important; align-items: center; gap: 12px;">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
            
            <button class="mobile-menu-toggle" id="mobileMenuToggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div class="mobile-menu glass-card" id="mobileMenu">
        <a href="/" class="mobile-menu-link"><i class="fas fa-home"></i> Home</a>
        <a href="/downloader" class="mobile-menu-link"><i class="fas fa-download"></i> Downloader</a>
        <a href="/metadata-generator" class="mobile-menu-link"><i class="fas fa-brain"></i> Metadata Generator</a>
        <a href="/uploader" class="mobile-menu-link"><i class="fas fa-upload"></i> Uploader</a>
        <div class="mobile-menu-divider"></div>
        
        <!-- Mobile Sign In (shown when not authenticated) -->
        <button id="mobileSignInBtn" class="btn btn-nav-signin mobile-menu-btn">
            <i class="fab fa-youtube"></i> Sign in
        </button>
        
        <!-- Mobile User Info (shown when authenticated) -->
        <div id="mobileUserInfo" style="display: none; padding: 14px;">
            <div style="font-weight: 600; margin-bottom: 5px;" id="mobileUserName">Channel Name</div>
            <div style="font-size: 13px; color: var(--text-secondary);" id="mobileUserStats">Stats</div>
        </div>
        <!-- ‚úÖ FIXED: Ensure mobile logout button is visible -->
        <button class="btn btn-logout mobile-menu-btn" id="mobileLogoutBtn" style="display: none; align-items: center; gap: 8px;">
            <i class="fas fa-sign-out-alt"></i> Logout
        </button>
    </div>

    <div class="container">
        <!-- Hero Section -->
        <section class="page-hero fade-in">
            <div class="hero-badge">
                <i class="fas fa-upload"></i>
                <span>Complete Automation</span>
            </div>
            <h1>YouTube Auto Uploader</h1>
            <p class="hero-subtitle">Upload videos directly to YouTube with AI-generated metadata. Fully automated workflow from Instagram download to YouTube publish.</p>
        </section>

        <!-- Auth Section -->
        <section id="authSection" class="upload-section glass-card fade-in-delay text-center" style="display: none;">
            <div class="section-header">
                <i class="fab fa-youtube"></i>
                <h2>Connect Your YouTube Channel</h2>
                <p>Sign in to start uploading videos automatically</p>
            </div>
            
            <!-- ‚úÖ UPDATED: Security notice -->
            <div style="background: rgba(0, 217, 255, 0.1); border: 1px solid rgba(0, 217, 255, 0.3); border-radius: 12px; padding: 15px; margin-bottom: 25px; max-width: 600px; margin-left: auto; margin-right: auto;">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                    <i class="fas fa-shield-alt" style="color: var(--secondary); font-size: 20px;"></i>
                    <strong style="color: var(--secondary);">Secure Private Session</strong>
                </div>
                <p style="font-size: 13px; color: var(--text-secondary); margin: 0; text-align: left;">
                    Your YouTube account will be accessible only on this device/browser. 
                    Each session is completely isolated and stays active until you manually logout. 
                    Your session will persist across browser restarts for convenience.
                </p>
            </div>
            
            <div class="auth-benefits" style="max-width: 600px; margin: 30px auto;">
                <div class="benefit-item">
                    <i class="fas fa-check-circle"></i>
                    <span>Private isolated session - Only you can access</span>
                </div>
                <div class="benefit-item">
                    <i class="fas fa-check-circle"></i>
                    <span>Secure OAuth 2.0 authentication</span>
                </div>
                <div class="benefit-item">
                    <i class="fas fa-check-circle"></i>
                    <span>Session stays active until manual logout</span>
                </div>
                <div class="benefit-item">
                    <i class="fas fa-check-circle"></i>
                    <span>Full control - Logout anytime to end session</span>
                </div>
            </div>
            
            <button id="authBtn" class="btn btn-auth btn-large">
                <i class="fab fa-youtube"></i> Sign in with YouTube
            </button>
            
            <p style="margin-top: 20px; font-size: 13px; color: var(--text-secondary);">
                <i class="fas fa-lock"></i> Your session is private and secure. No one else can access your account.
            </p>
        </section>

        <!-- Channel Info -->
        <section id="channelInfo" class="channel-info glass-card fade-in" style="display: none;">
            <div class="channel-header">
                <img id="channelAvatar" class="channel-avatar" src="" alt="Channel Avatar">
                <div class="channel-details">
                    <h2 id="channelName">Channel Name</h2>
                    <p id="channelStats">Loading...</p>
                </div>
                <!-- ‚úÖ FIXED: Ensure logout button is always visible -->
                <button id="logoutBtnMain" class="btn btn-logout" style="margin-left: auto; display: inline-flex; align-items: center; gap: 8px;">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </section>

        <!-- Upload Section -->
        <section id="uploadSection" class="upload-section glass-card fade-in-delay" style="display: none;">
            <div class="section-header">
                <i class="fas fa-cloud-upload-alt"></i>
                <h2>Upload to YouTube</h2>
                <p>Choose your video source and let AI handle the rest</p>
            </div>

            <!-- Video Source Selection Tabs -->
            <div style="display: flex; gap: 15px; margin-bottom: 25px; flex-wrap: wrap;">
                <button type="button" id="sourceTabInstagram" class="btn btn-secondary" style="flex: 1; min-width: 200px; opacity: 1;">
                    <i class="fab fa-instagram"></i> Instagram Reel
                </button>
                <button type="button" id="sourceTabLocal" class="btn btn-secondary" style="flex: 1; min-width: 200px; opacity: 0.6;">
                    <i class="fas fa-video"></i> Local Video
                </button>
            </div>

            <!-- Instagram Reel Section -->
            <div id="instagramSection">
                <div class="input-group">
                    <i class="fab fa-instagram"></i>
                    <input type="text" id="reelUrl" class="glass-input" 
                           placeholder="Paste Instagram Reel URL here...">
                </div>
            </div>

            <!-- Local Video Upload Section -->
            <div id="localVideoSection" style="display: none;">
                <div class="input-group" style="cursor: pointer;" onclick="document.getElementById('localVideoInput').click();">
                    <i class="fas fa-video"></i>
                    <input type="text" id="localVideoFileName" class="glass-input" 
                           placeholder="Choose video from device..." readonly>
                    <input type="file" id="localVideoInput" accept="video/*,.mp4,.mov,.avi,.mkv,.webm,.m4v" style="display: none;">
                </div>
                <p style="font-size: 13px; color: var(--text-secondary); margin-top: 10px; margin-bottom: 0;">
                    <i class="fas fa-info-circle"></i> Supported formats: MP4, MOV, AVI, MKV, WEBM, M4V (Max 500MB)
                </p>
                
                <!-- Video Preview -->
                <div id="videoPreviewSection" style="display: none; margin-top: 20px;">
                    <video id="videoPreview" controls style="width: 100%; max-height: 400px; border-radius: 12px; background: #000;"></video>
                    <div style="margin-top: 15px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;">
                        <div>
                            <p style="margin: 0; font-size: 14px; color: var(--text-secondary);">
                                <i class="fas fa-file-video"></i> <span id="videoFileInfo"></span>
                            </p>
                        </div>
                        <button type="button" id="removeVideoBtn" class="btn btn-secondary" style="padding: 8px 16px; font-size: 14px;">
                            <i class="fas fa-times"></i> Remove
                        </button>
                    </div>
                </div>
            </div>

            <!-- Video Editing Options Section (existing) -->
            <div class="video-editing-section glass-card" style="margin-top: 25px; padding: 25px;">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                    <div>
                        <h3 style="margin: 0; font-size: 18px; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-magic"></i> Video Editing (Optional)
                        </h3>
                        <p style="margin: 5px 0 0 0; font-size: 13px; color: var(--text-secondary);">
                            Enhance your video with background music and text overlays
                        </p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="enableEditingToggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div id="editingOptions" style="display: none; animation: slideDown 0.3s ease;">
                    <!-- Background Music Section -->
                    <div class="editing-option" style="margin-bottom: 20px;">
                        <label style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px; font-weight: 600;">
                            <i class="fas fa-music" style="color: var(--secondary);"></i>
                            Background Music
                        </label>
                        
                        <!-- Music Source Tabs -->
                        <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                            <button type="button" id="musicTabUrl" class="btn btn-secondary" style="flex: 1; padding: 10px; font-size: 14px;">
                                <i class="fab fa-youtube"></i> YouTube URL
                            </button>
                            <button type="button" id="musicTabFile" class="btn btn-secondary" style="flex: 1; padding: 10px; font-size: 14px; opacity: 0.6;">
                                <i class="fas fa-file-audio"></i> Local File
                            </button>
                        </div>

                        <!-- YouTube URL Input -->
                        <div id="musicUrlSection">
                            <div class="input-group" style="margin-bottom: 10px;">
                                <i class="fab fa-youtube"></i>
                                <input type="text" id="musicUrl" class="glass-input" 
                                       placeholder="Paste YouTube music URL (optional)...">
                            </div>
                        </div>

                        <!-- Local File Input -->
                        <div id="musicFileSection" style="display: none;">
                            <div class="input-group" style="margin-bottom: 10px; cursor: pointer;" onclick="document.getElementById('musicFileInput').click();">
                                <i class="fas fa-upload"></i>
                                <input type="text" id="musicFileName" class="glass-input" 
                                       placeholder="Choose audio file from device..." readonly>
                                <input type="file" id="musicFileInput" accept="audio/*,.mp3,.wav,.m4a,.aac" style="display: none;">
                            </div>
                            <p style="font-size: 12px; color: var(--text-secondary); margin-top: 5px;">
                                <i class="fas fa-info-circle"></i> Supported formats: MP3, WAV, M4A, AAC
                            </p>
                        </div>

                        <div style="display: flex; align-items: center; gap: 15px;">
                            <label style="font-size: 14px; color: var(--text-secondary);">
                                <i class="fas fa-volume-up"></i> Volume:
                            </label>
                            <input type="range" id="musicVolume" min="0" max="100" value="30" 
                                   style="flex: 1; accent-color: var(--secondary);">
                            <span id="volumeValue" style="min-width: 40px; font-weight: 600;">30%</span>
                        </div>
                    </div>

                    <!-- Text Overlays Section -->
                    <div class="editing-option">
                        <label style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px; font-weight: 600;">
                            <i class="fas fa-text-height" style="color: var(--primary);"></i>
                            Text Overlays
                        </label>
                        <div id="textOverlaysContainer">
                            <!-- Text overlay items will be added here -->
                        </div>
                        <button type="button" id="addTextOverlay" class="btn btn-secondary" 
                                style="width: 100%; margin-top: 10px;">
                            <i class="fas fa-plus"></i> Add Text Overlay
                        </button>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button id="uploadBtn" class="btn btn-primary">
                    <i class="fas fa-upload"></i> Auto Upload
                </button>
            </div>

            <!-- Progress Section -->
            <div id="progressSection" class="progress-section" style="display: none;">
                <div class="progress-header">
                    <h3 id="progressTitle">Processing...</h3>
                    <span id="progressPercent" class="progress-percent">0%</span>
                </div>
                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill" style="width: 0%"></div>
                </div>
                <p id="progressMessage" class="progress-message">Starting...</p>
            </div>

            <!-- Metadata Preview -->
            <div id="metadataPreview" class="metadata-preview" style="display: none;">
                <h3><i class="fas fa-sparkles"></i> AI Generated Metadata</h3>
                <div class="metadata-content">
                    <div class="metadata-item">
                        <label><i class="fas fa-heading"></i> Title</label>
                        <div id="previewTitle" class="metadata-value"></div>
                    </div>
                    <div class="metadata-item">
                        <label><i class="fas fa-align-left"></i> Description</label>
                        <div id="previewDescription" class="metadata-value scrollable"></div>
                    </div>
                    <div class="metadata-item">
                        <label><i class="fas fa-tags"></i> Tags</label>
                        <div id="previewTags" class="metadata-tags"></div>
                    </div>
                    <div class="metadata-item">
                        <label><i class="fas fa-hashtag"></i> Hashtags</label>
                        <div id="previewHashtags" class="metadata-tags"></div>
                    </div>
                </div>
            </div>

            <!-- Success Result -->
            <div id="successResult" class="result-section success glass-card" style="display: none;">
                <div class="result-icon">üéâ</div>
                <h3>Upload Successful!</h3>
                <p>Your video is now live on YouTube</p>
                <div class="button-group">
                    <a id="watchBtn" href="#" target="_blank" class="btn btn-watch">
                        <i class="fab fa-youtube"></i> Watch on YouTube
                    </a>
                    <button id="uploadAnotherBtn" class="btn btn-retry">
                        <i class="fas fa-plus"></i> Upload Another
                    </button>
                </div>
            </div>

            <!-- Error Result -->
            <div id="errorResult" class="result-section error glass-card" style="display: none;">
                <div class="result-icon">‚ùå</div>
                <h3>Upload Failed</h3>
                <p id="errorMessage">An error occurred</p>
                <button id="retryBtn" class="btn btn-retry">
                    <i class="fas fa-redo"></i> Try Again
                </button>
            </div>
        </section>

        <!-- Features Section -->
        <section class="features-section fade-in-delay-1">
            <div class="section-header">
                <h2>Complete Automation Features</h2>
                <p>Everything you need for effortless YouTube uploads</p>
            </div>

            <div class="features-grid-small">
                <div class="feature-card glass-card">
                    <i class="fas fa-robot feature-icon-small"></i>
                    <h3>Fully Automated</h3>
                    <p>One-click upload process. No manual work required. From download to publish in minutes.</p>
                </div>

                <div class="feature-card glass-card">
                    <i class="fas fa-brain feature-icon-small"></i>
                    <h3>AI Metadata</h3>
                    <p>Automatically generates SEO-optimized titles, descriptions, tags, and hashtags using AI.</p>
                </div>

                <div class="feature-card glass-card">
                    <i class="fas fa-bolt feature-icon-small"></i>
                    <h3>Lightning Fast</h3>
                    <p>High-speed processing ensures your content is live on YouTube in record time.</p>
                </div>

                <div class="feature-card glass-card">
                    <i class="fas fa-shield-alt feature-icon-small"></i>
                    <h3>Secure OAuth</h3>
                    <p>Industry-standard OAuth 2.0 authentication. Your credentials are never stored.</p>
                </div>

                <div class="feature-card glass-card">
                    <i class="fas fa-chart-line feature-icon-small"></i>
                    <h3>Real-time Tracking</h3>
                    <p>Monitor upload progress in real-time with detailed status updates at each stage.</p>
                </div>

                <div class="feature-card glass-card">
                    <i class="fas fa-cog feature-icon-small"></i>
                    <h3>Custom Settings</h3>
                    <p>Choose privacy settings, categories, and other options for your uploads.</p>
                </div>
            </div>
        </section>

        <!-- How It Works Section -->
        <section class="how-to-use glass-card fade-in-delay-2">
            <div class="section-header">
                <h2>How Auto Upload Works</h2>
                <p>Complete automation in 4 simple steps</p>
            </div>

            <div class="steps-list">
                <div class="step-card">
                    <div class="step-number-badge">1</div>
                    <div class="step-info">
                        <h3>Authenticate with YouTube</h3>
                        <p>Click "Sign in with YouTube" to connect your channel. Uses secure OAuth 2.0 authentication. This is a one-time setup.</p>
                        <div class="step-tip">
                            <i class="fas fa-shield-alt"></i>
                            <span>Secure authentication - we never store your password</span>
                        </div>
                    </div>
                </div>

                <div class="step-card">
                    <div class="step-number-badge">2</div>
                    <div class="step-info">
                        <h3>Paste Instagram Reel URL</h3>
                        <p>Copy the link to the Instagram Reel you want to upload and paste it into the input field.</p>
                        <div class="step-tip">
                            <i class="fas fa-link"></i>
                            <span>Supports all public Instagram Reels</span>
                        </div>
                    </div>
                </div>

                <div class="step-card">
                    <div class="step-number-badge">3</div>
                    <div class="step-info">
                        <h3>AI Analyzes & Generates</h3>
                        <p>Our AI downloads the video, analyzes content, and generates optimized metadata including title, description, tags, and hashtags.</p>
                        <div class="step-tip">
                            <i class="fas fa-magic"></i>
                            <span>Powered by Google Gemini AI for best results</span>
                        </div>
                    </div>
                </div>

                <div class="step-card">
                    <div class="step-number-badge">4</div>
                    <div class="step-info">
                        <h3>Auto Upload to YouTube</h3>
                        <p>Video is automatically uploaded to your YouTube channel with all AI-generated metadata applied. Your video goes live instantly!</p>
                        <div class="step-tip">
                            <i class="fas fa-rocket"></i>
                            <span>Track real-time progress and get instant video link</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Benefits Section -->
        <section class="benefits-section fade-in-delay-2">
            <div class="section-header">
                <h2>Why Use Auto Uploader?</h2>
                <p>Advantages of automated YouTube uploads</p>
            </div>

            <div class="benefits-grid">
                <div class="benefit-card glass-card">
                    <i class="fas fa-clock benefit-icon"></i>
                    <h3>Save Hours</h3>
                    <p>Upload in minutes instead of hours. Automate your entire content workflow.</p>
                </div>

                <div class="benefit-card glass-card">
                    <i class="fas fa-sync benefit-icon"></i>
                    <h3>Consistent Quality</h3>
                    <p>Every upload gets professional-quality metadata automatically.</p>
                </div>

                <div class="benefit-card glass-card">
                    <i class="fas fa-search benefit-icon"></i>
                    <h3>SEO Optimized</h3>
                    <p>AI-generated metadata is optimized for YouTube's search algorithm.</p>
                </div>

                <div class="benefit-card glass-card">
                    <i class="fas fa-chart-line benefit-icon"></i>
                    <h3>Grow Faster</h3>
                    <p>Post more content consistently to grow your channel faster.</p>
                </div>

                <div class="benefit-card glass-card">
                    <i class="fas fa-shield-alt benefit-icon"></i>
                    <h3>100% Secure</h3>
                    <p>Official YouTube API with OAuth 2.0. Revoke access anytime.</p>
                </div>

                <div class="benefit-card glass-card">
                    <i class="fas fa-mobile-alt benefit-icon"></i>
                    <h3>Works Everywhere</h3>
                    <p>Upload from any device - desktop, tablet, or mobile.</p>
                </div>
            </div>
        </section>

        <!-- Use Cases Section -->
        <section class="use-cases-section glass-card fade-in-delay-3">
            <div class="section-header">
                <h2>Perfect For</h2>
                <p>Who benefits from automated YouTube uploads</p>
            </div>

            <div class="use-cases-grid">
                <div class="use-case-item">
                    <i class="fas fa-video"></i>
                    <h4>Content Creators</h4>
                    <p>Repurpose Instagram content for YouTube effortlessly</p>
                </div>

                <div class="use-case-item">
                    <i class="fas fa-users"></i>
                    <h4>Social Media Managers</h4>
                    <p>Manage multiple channels with automated workflows</p>
                </div>

                <div class="use-case-item">
                    <i class="fas fa-bullhorn"></i>
                    <h4>Digital Marketers</h4>
                    <p>Scale video marketing campaigns across platforms</p>
                </div>

                <div class="use-case-item">
                    <i class="fas fa-store"></i>
                    <h4>E-commerce Brands</h4>
                    <p>Automatically post product videos to YouTube</p>
                </div>

                <div class="use-case-item">
                    <i class="fas fa-graduation-cap"></i>
                    <h4>Educators</h4>
                    <p>Share educational content across multiple platforms</p>
                </div>

                <div class="use-case-item">
                    <i class="fas fa-music"></i>
                    <h4>Musicians & Artists</h4>
                    <p>Promote your work with automated uploads</p>
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section class="faq-section fade-in-delay-3">
            <div class="section-header">
                <h2>Frequently Asked Questions</h2>
                <p>Everything you need to know about auto uploading</p>
            </div>

            <div class="faq-container">
                <div class="faq-item glass-card">
                    <div class="faq-question">
                        <i class="fas fa-question-circle"></i>
                        <h3>Is my YouTube account safe?</h3>
                        <i class="fas fa-chevron-down faq-toggle"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Yes, absolutely! We use YouTube's official API with OAuth 2.0 authentication, the same secure method used by Google's own applications. Your credentials are never stored on our servers, and you can revoke access anytime from your Google account settings.</p>
                    </div>
                </div>

                <div class="faq-item glass-card">
                    <div class="faq-question">
                        <i class="fas fa-question-circle"></i>
                        <h3>How long does the upload process take?</h3>
                        <i class="fas fa-chevron-down faq-toggle"></i>
                    </div>
                    <div class="faq-answer">
                        <p>The entire process typically takes 2-5 minutes depending on video size. Download takes 30-60 seconds, AI metadata generation takes 10-30 seconds, and YouTube upload takes 1-3 minutes.</p>
                    </div>
                </div>

                <div class="faq-item glass-card">
                    <div class="faq-question">
                        <i class="fas fa-question-circle"></i>
                        <h3>Can I customize the metadata before upload?</h3>
                        <i class="fas fa-chevron-down faq-toggle"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Currently, metadata is automatically generated and applied. We're working on adding an editor feature where you can review and modify AI-generated metadata before the upload completes.</p>
                    </div>
                </div>

                <div class="faq-item glass-card">
                    <div class="faq-question">
                        <i class="fas fa-question-circle"></i>
                        <h3>What video privacy settings are used?</h3>
                        <i class="fas fa-chevron-down faq-toggle"></i>
                    </div>
                    <div class="faq-answer">
                        <p>By default, videos are uploaded as "Public". We're adding support for custom privacy settings (Private, Unlisted, Public) in an upcoming update.</p>
                    </div>
                </div>

                <div class="faq-item glass-card">
                    <div class="faq-question">
                        <i class="fas fa-question-circle"></i>
                        <h3>Are there any upload limits?</h3>
                        <i class="fas fa-chevron-down faq-toggle"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Upload limits depend on YouTube API quotas. Standard quota allows approximately 6-10 uploads per day. For higher limits, you can request quota increase from Google Cloud Console.</p>
                    </div>
                </div>

                <div class="faq-item glass-card">
                    <div class="faq-question">
                        <i class="fas fa-question-circle"></i>
                        <h3>What happens if upload fails?</h3>
                        <i class="fas fa-chevron-down faq-toggle"></i>
                    </div>
                    <div class="faq-answer">
                        <p>If an upload fails, you'll receive a detailed error message. Common issues include expired Instagram session, YouTube quota limits, or network problems. You can retry the upload after resolving the issue.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section class="cta-section glass-card fade-in-delay-3 text-center">
            <i class="fas fa-rocket cta-icon"></i>
            <h2>Ready to Automate Your Uploads?</h2>
            <p>Start uploading to YouTube with AI-powered automation today</p>
            <div class="cta-buttons">
                <button class="btn btn-primary btn-large" onclick="document.getElementById('authSection').scrollIntoView({ behavior: 'smooth' })">
                    <i class="fas fa-play"></i> Get Started Now
                </button>
                <a href="/metadata-generator" class="btn btn-preview btn-large">
                    <i class="fas fa-brain"></i> Try Metadata First
                </a>
            </div>
            <p class="cta-note">No credit card required ‚Ä¢ Free to use</p>
        </section>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner"></div>
        <p>Processing...</p>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <script>
        // Mobile menu toggle
        const mobileMenuToggle = document.getElementById('mobileMenuToggle');
        const mobileMenu = document.getElementById('mobileMenu');
        
        if (mobileMenuToggle) {
            mobileMenuToggle.addEventListener('click', () => {
                mobileMenu.classList.toggle('active');
            });
        }
        
        // Close mobile menu when clicking outside
        document.addEventListener('click', (e) => {
            if (mobileMenu && 
                mobileMenu.classList.contains('active') &&
                !mobileMenu.contains(e.target) &&
                !mobileMenuToggle.contains(e.target)) {
                mobileMenu.classList.remove('active');
            }
        });
        
        // Add main logout button handler
        const logoutBtnMain = document.getElementById('logoutBtnMain');
        if (logoutBtnMain) {
            logoutBtnMain.addEventListener('click', async () => {
                if (!confirm('Are you sure you want to logout?')) return;
                
                try {
                    const response = await fetch('/logout', { method: 'POST' });
                    const data = await response.json();
                    
                    if (data.success) {
                        showToast('Logged out successfully', 'success');
                        setTimeout(() => {
                            location.reload();
                        }, 1000);
                    } else {
                        showToast('Logout failed: ' + (data.error || 'Unknown error'), 'error');
                    }
                } catch (error) {
                    showToast('Logout failed: ' + error.message, 'error');
                }
            });
        }
        
        // FAQ Accordion
        document.querySelectorAll('.faq-question').forEach(question => {
            question.addEventListener('click', () => {
                const faqItem = question.parentElement;
                const isActive = faqItem.classList.contains('active');
                
                document.querySelectorAll('.faq-item').forEach(item => {
                    item.classList.remove('active');
                });
                
                if (!isActive) {
                    faqItem.classList.add('active');
                }
            });
        });

        // Video Editing Toggle
        const enableEditingToggle = document.getElementById('enableEditingToggle');
        const editingOptions = document.getElementById('editingOptions');
        
        if (enableEditingToggle) {
            enableEditingToggle.addEventListener('change', () => {
                editingOptions.style.display = enableEditingToggle.checked ? 'block' : 'none';
            });
        }

        // Music Volume Slider
        const musicVolume = document.getElementById('musicVolume');
        const volumeValue = document.getElementById('volumeValue');
        
        if (musicVolume && volumeValue) {
            musicVolume.addEventListener('input', () => {
                volumeValue.textContent = musicVolume.value + '%';
            });
        }

        // Text Overlay Management
        let overlayCount = 0;
        const textOverlaysContainer = document.getElementById('textOverlaysContainer');
        const addTextOverlayBtn = document.getElementById('addTextOverlay');

        if (addTextOverlayBtn) {
            addTextOverlayBtn.addEventListener('click', () => {
                overlayCount++;
                const overlayId = `overlay-${overlayCount}`;
                
                const overlayDiv = document.createElement('div');
                overlayDiv.className = 'text-overlay-item';
                overlayDiv.id = overlayId;
                overlayDiv.innerHTML = `
                    <div style="background: rgba(255, 255, 255, 0.02); padding: 15px; border-radius: 12px; margin-bottom: 10px; border: 1px solid var(--border);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <span style="font-weight: 600; font-size: 14px;">Text Overlay #${overlayCount}</span>
                            <button type="button" class="remove-overlay-btn" data-overlay-id="${overlayId}" 
                                    style="background: rgba(255, 23, 68, 0.15); border: none; color: var(--error); 
                                           padding: 5px 12px; border-radius: 6px; cursor: pointer; font-size: 12px;">
                                <i class="fas fa-times"></i> Remove
                            </button>
                        </div>
                        <input type="text" class="glass-input overlay-text" placeholder="Enter text..." 
                               style="width: 100%; margin-bottom: 10px; padding: 10px; font-size: 14px;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                            <select class="glass-input overlay-position" style="padding: 10px; font-size: 14px;">
                                <option value="top">Top</option>
                                <option value="bottom">Bottom</option>
                                <option value="center">Center</option>
                            </select>
                            <input type="number" class="glass-input overlay-duration" placeholder="Duration (sec)" 
                                   value="5" min="1" max="60" style="padding: 10px; font-size: 14px;">
                        </div>
                    </div>
                `;
                
                textOverlaysContainer.appendChild(overlayDiv);
                
                // Add remove handler
                const removeBtn = overlayDiv.querySelector('.remove-overlay-btn');
                removeBtn.addEventListener('click', () => {
                    overlayDiv.remove();
                });
            });
        }

        // Music Source Tabs
        const musicTabUrl = document.getElementById('musicTabUrl');
        const musicTabFile = document.getElementById('musicTabFile');
        const musicUrlSection = document.getElementById('musicUrlSection');
        const musicFileSection = document.getElementById('musicFileSection');

        if (musicTabUrl && musicTabFile) {
            musicTabUrl.addEventListener('click', () => {
                musicTabUrl.classList.add('active');
                musicTabFile.classList.remove('active');
                musicUrlSection.style.display = 'block';
                musicFileSection.style.display = 'none';
            });

            musicTabFile.addEventListener('click', () => {
                musicTabFile.classList.add('active');
                musicTabUrl.classList.remove('active');
                musicUrlSection.style.display = 'none';
                musicFileSection.style.display = 'block';
            });
        }

        // Music File Input
        const musicFileInput = document.getElementById('musicFileInput');
        const musicFileName = document.getElementById('musicFileName');

        if (musicFileInput) {
            musicFileInput.addEventListener('change', (event) => {
                const file = event.target.files[0];
                if (file) {
                    musicFileName.value = file.name;
                } else {
                    musicFileName.value = '';
                }
            });
        }

        // Video Source Tab Switching
        const sourceTabInstagram = document.getElementById('sourceTabInstagram');
        const sourceTabLocal = document.getElementById('sourceTabLocal');
        const instagramSection = document.getElementById('instagramSection');
        const localVideoSection = document.getElementById('localVideoSection');
        const localVideoInput = document.getElementById('localVideoInput');
        const localVideoFileName = document.getElementById('localVideoFileName');
        const videoPreviewSection = document.getElementById('videoPreviewSection');
        const videoPreview = document.getElementById('videoPreview');
        const videoFileInfo = document.getElementById('videoFileInfo');
        const removeVideoBtn = document.getElementById('removeVideoBtn');

        // ‚úÖ Initialize global variables
        window.currentVideoSource = 'instagram';
        window.uploadedVideoFile = null;
        window.uploadedVideoPath = null;

        if (sourceTabInstagram && sourceTabLocal) {
            sourceTabInstagram.addEventListener('click', () => {
                window.currentVideoSource = 'instagram';
                sourceTabInstagram.style.opacity = '1';
                sourceTabLocal.style.opacity = '0.6';
                instagramSection.style.display = 'block';
                localVideoSection.style.display = 'none';
                window.uploadedVideoFile = null;
                window.uploadedVideoPath = null;
            });

            sourceTabLocal.addEventListener('click', () => {
                window.currentVideoSource = 'local';
                sourceTabLocal.style.opacity = '1';
                sourceTabInstagram.style.opacity = '0.6';
                localVideoSection.style.display = 'block';
                instagramSection.style.display = 'none';
                document.getElementById('reelUrl').value = '';
            });
        }

        // Handle local video file selection
        if (localVideoInput) {
            localVideoInput.addEventListener('change', async (e) => {
                const file = e.target.files[0];
                if (!file) return;

                // Validate file type
                const validTypes = ['video/mp4', 'video/quicktime', 'video/x-msvideo', 'video/x-matroska', 'video/webm', 'video/x-m4v'];
                if (!validTypes.includes(file.type) && !file.name.match(/\.(mp4|mov|avi|mkv|webm|m4v)$/i)) {
                    showToast('Please select a valid video file (MP4, MOV, AVI, MKV, WEBM, M4V)', 'error');
                    return;
                }

                // Check file size (max 500MB)
                if (file.size > 500 * 1024 * 1024) {
                    showToast('File size too large. Maximum 500MB allowed.', 'error');
                    return;
                }

                // Update UI
                localVideoFileName.value = file.name;
                
                // Show video preview
                const fileURL = URL.createObjectURL(file);
                videoPreview.src = fileURL;
                videoPreviewSection.style.display = 'block';
                
                // Show file info
                const fileSizeMB = (file.size / (1024 * 1024)).toFixed(2);
                videoFileInfo.textContent = `${file.name} (${fileSizeMB} MB)`;
                
                // Upload file to server
                showLoadingOverlay('Uploading video to server...');
                
                try {
                    const formData = new FormData();
                    formData.append('video', file);
                    
                    const uploadResponse = await fetch('/upload-local-video', {
                        method: 'POST',
                        body: formData
                    });
                    
                    const uploadResult = await uploadResponse.json();
                    
                    hideLoadingOverlay();
                    
                    if (!uploadResult.success) {
                        throw new Error(uploadResult.error || 'Video upload failed');
                    }
                    
                    // ‚úÖ Store video path globally
                    window.uploadedVideoPath = uploadResult.filepath;
                    window.uploadedVideoFile = file;
                    
                    showToast('Video uploaded successfully. Ready to process!', 'success');
                    
                } catch (error) {
                    hideLoadingOverlay();
                    showToast('Failed to upload video: ' + error.message, 'error');
                    videoPreviewSection.style.display = 'none';
                    localVideoFileName.value = '';
                    window.uploadedVideoPath = null;
                    window.uploadedVideoFile = null;
                }
            });
        }

        // Remove video button
        if (removeVideoBtn) {
            removeVideoBtn.addEventListener('click', () => {
                localVideoInput.value = '';
                localVideoFileName.value = '';
                videoPreview.src = '';
                videoPreviewSection.style.display = 'none';
                window.uploadedVideoFile = null;
                window.uploadedVideoPath = null;
            });
        }

        // Helper functions
        function showLoadingOverlay(message) {
            const overlay = document.getElementById('loadingOverlay');
            if (overlay) {
                overlay.querySelector('p').textContent = message;
                overlay.style.display = 'flex';
            }
        }

        function hideLoadingOverlay() {
            const overlay = document.getElementById('loadingOverlay');
            if (overlay) {
                overlay.style.display = 'none';
            }
        }

        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            if (toast) {
                toast.textContent = message;
                toast.className = 'toast show';
                
                if (type === 'success') {
                    toast.style.borderLeft = '4px solid var(--success)';
                } else if (type === 'error') {
                    toast.style.borderLeft = '4px solid var(--error)';
                }
                
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 4000);
            }
        }

        // Register Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/static/sw.js', { scope: '/' }).catch(() => {});
        }
    </script>
    <script src="{{ url_for('static', filename='js/uploader.js') }}"></script>
</body>
</html>
